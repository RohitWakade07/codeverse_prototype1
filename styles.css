:root {
    --bg: #0b0f14;
    --bg-elev: #111823;
    --bg-elev-2: #0e1520;
    --text: #e6ecf2;
    --muted: #96a0aa;
    --brand: #7aa2ff;
    --accent: #22d3ee;
    --positive: #2dd4bf;
    --warning: #f59e0b;
    --danger: #f87171;
    --card: #0f1722;
    --outline: #1f2a37;
    --shadow: 0 10px 40px rgba(0,0,0,.45);
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
    margin: 0;
    font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    background: radial-gradient(1200px 600px at 80% -10%, rgba(34,211,238,.08), transparent),
                radial-gradient(900px 600px at -10% 20%, rgba(122,162,255,.12), transparent),
                var(--bg);
    color: var(--text);
}

.app-header {
    position: sticky; top: 0; z-index: 10;
    display: flex; align-items: center; justify-content: space-between;
    padding: 14px 20px; background: rgba(10,14,20,.7); backdrop-filter: saturate(120%) blur(10px);
    border-bottom: 1px solid var(--outline);
}
.brand { display: flex; align-items: center; gap: 12px; }
.logo { width: 36px; height: 36px; display: grid; place-items: center; background: linear-gradient(135deg, var(--brand), var(--accent)); color: #0b0f14; border-radius: 10px; font-weight: 900; }
.title h1 { margin: 0; font-size: 18px; letter-spacing: .4px; }
.title p { margin: 2px 0 0; color: var(--muted); font-size: 12px; }

.main-nav { display: flex; gap: 12px; align-items: center; margin-left: 12px; }
.main-nav a { color: var(--muted); text-decoration: none; padding: 6px 10px; border-radius: 8px; border: 1px solid transparent; }
.main-nav a:hover, .main-nav a.active { color: var(--text); border-color: var(--outline); background: rgba(255,255,255,.03); }

.header-actions { display: flex; gap: 10px; align-items: center; }
.toggle { display: inline-flex; align-items: center; gap: 6px; color: var(--muted); cursor: pointer; }
.toggle input { accent-color: var(--accent); }
.ghost { background: transparent; color: var(--text); border: 1px solid var(--outline); padding: 8px 12px; border-radius: 10px; cursor: pointer; }
.ghost:hover { border-color: var(--brand); color: var(--brand); }

.container { max-width: 1200px; padding: 24px; margin: 0 auto; }

.kpis { display: grid; grid-template-columns: repeat(4, 1fr); gap: 14px; }
.kpi { background: var(--card); border: 1px solid var(--outline); border-radius: 14px; padding: 16px; box-shadow: var(--shadow); }
.kpi-label { color: var(--muted); font-size: 12px; }
.kpi-value { font-size: 28px; font-weight: 700; margin-top: 4px; }
.kpi-delta { margin-top: 8px; font-size: 12px; color: var(--muted); }
.kpi-delta.positive { color: var(--positive); }
.kpi-delta.warning { color: var(--warning); }
.kpi-delta.neutral { color: var(--muted); }

.panels { display: grid; grid-template-columns: 1.3fr .9fr; gap: 16px; margin-top: 18px; }
.panel { background: var(--bg-elev); border: 1px solid var(--outline); border-radius: 16px; padding: 14px; box-shadow: var(--shadow); }
.panel-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px; }
.panel h2 { margin: 0; font-size: 16px; }
.filters select { background: var(--bg-elev-2); color: var(--text); border: 1px solid var(--outline); border-radius: 10px; padding: 6px 10px; }
.chip { display: inline-flex; align-items: center; gap: 6px; border: 1px solid var(--outline); padding: 4px 8px; border-radius: 999px; color: var(--muted); }
.chip input { accent-color: var(--accent); }

canvas { width: 100%; height: 300px; background: linear-gradient(180deg, rgba(122,162,255,.08), rgba(34,211,238,.04)); border-radius: 12px; border: 1px solid var(--outline); }
.legend { display: flex; gap: 12px; margin-top: 10px; color: var(--muted); font-size: 12px; }
.legend .item { display: inline-flex; align-items: center; gap: 6px; }
.legend .dot { width: 10px; height: 10px; border-radius: 50%; }

.map-canvas { height: 220px; background: #0e1520; border: 1px solid var(--outline); border-radius: 12px; position: relative; overflow: hidden; }
.map-canvas .leaflet-pane, .map-canvas .leaflet-control { filter: invert(1) hue-rotate(180deg) brightness(0.9) contrast(0.9); }
.alerts { list-style: none; padding: 0; margin: 12px 0 0; display: grid; gap: 8px; }
.alerts li { display: flex; justify-content: space-between; align-items: center; padding: 10px 12px; border: 1px solid var(--outline); border-radius: 10px; background: var(--bg-elev-2); }
.badge { padding: 4px 8px; border-radius: 999px; font-size: 11px; letter-spacing: .2px; }
.badge.risk-high { background: rgba(248,113,113,.1); color: var(--danger); border: 1px solid rgba(248,113,113,.3); }
.badge.risk-med { background: rgba(245,158,11,.08); color: var(--warning); border: 1px solid rgba(245,158,11,.3); }
.badge.info { background: rgba(122,162,255,.12); color: var(--brand); border: 1px solid rgba(122,162,255,.3); }

.app-footer { display: flex; align-items: center; justify-content: space-between; padding: 14px 20px; border-top: 1px solid var(--outline); color: var(--muted); }

/* Planner */
.planner .panel { margin-top: 18px; }
.route-grid { display: grid; grid-template-columns: 1fr 1fr auto auto; gap: 12px; }
.route-grid label { display: grid; gap: 6px; color: var(--muted); font-size: 12px; }
.route-grid input { background: var(--bg-elev-2); color: var(--text); border: 1px solid var(--outline); border-radius: 10px; padding: 10px 12px; }
.primary { background: linear-gradient(135deg, var(--brand), var(--accent)); color: #081018; border: 0; padding: 10px 16px; border-radius: 12px; font-weight: 700; cursor: pointer; }
.primary:hover { filter: brightness(1.05); }
.route-result { margin-top: 10px; color: var(--muted); }

/* Benefits */
.benefits { display: grid; grid-template-columns: repeat(3, 1fr); gap: 14px; margin-top: 24px; }
.benefit { background: var(--card); border: 1px solid var(--outline); border-radius: 14px; padding: 14px; }
.benefit h3 { margin: 0 0 6px; font-size: 14px; }
.benefit p { margin: 0; color: var(--muted); font-size: 13px; }

@media (max-width: 980px) {
    .kpis { grid-template-columns: repeat(2, 1fr); }
    .panels { grid-template-columns: 1fr; }
    .route-grid { grid-template-columns: 1fr 1fr; }
    .benefits { grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 540px) {
    .kpis { grid-template-columns: 1fr; }
    .title h1 { font-size: 16px; }
    .route-grid { grid-template-columns: 1fr; }
    .benefits { grid-template-columns: 1fr; }
}

/* Map pins */
.pin { position: absolute; width: 10px; height: 10px; border-radius: 50%; box-shadow: 0 0 0 3px rgba(0,0,0,.25); }
.pin.high { background: var(--danger); }
.pin.medium { background: var(--warning); }
.pin.low { background: var(--positive); }


